<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="../assets/logo-army.png" type="image/x-icon">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="../js/funcoes.js"></script>
    <title>Homepage</title>
</head>

<body onload="validarSessao()">
    <div class="container">
        <div class="navBar">
            <div class="profile">
                <img src="../assets/profile/profile1.png" alt="foto perfil">
                <span id="username">username</span>
            </div>
            <div class="menu-navegacao">
                <ul>
                    <li id="opcao_nav"><a href="home.html">home</a></li>
                    <li id="opcao_nav">perfil</li>
                    <li id="opcao_nav"><a href="quizdash.html">quizz</a></li>
                    <li id="opcao_nav"><a href="">dashboardz</a></li>
                    <li id="opcao_nav" onclick="logout()">logout</li>
                </ul>
            </div>
        </div>
        <div class="dash-quizz">
            <h1 id="quizz1">Conhecimento sobre trajetoria</h1>

            <div class="quizz-foto" id="foto_1">
                <h1>foto 1 / 7</h1>
                <div class="foto">
                    <img src="../assets/quizz-foto/jungkook.png" alt="">
                    <h5>Dica: Integrante mais novo do grupo.</h5>
                    <span class=respostas>
                        <input type="text" id="R_Q1" placeholder="Digite seu palpite">
                    </span>
                </div>
                <span class="botoes">
                    <button onclick="avancar()">Proxima</button>
                </span>
            </div>
            <!-- foto 2 -->
            <div class="quizz-foto" id="foto_2">
                <h1>foto 2 / 7</h1>
                <div class="foto">
                    <img src="../assets/quizz-foto/rm.png" alt="bts dna teaser">
                    <h5>Dica: Criou o design do Koya do BT21</h5>
                    <span class=respostas>
                        <input type="text" id="R_Q2" placeholder="Digite seu palpite">
                    </span>
                </div>
                <span class="botoes">
                    <button onclick="retornar()">Voltar</button>
                    <button onclick="avancar()">Proxima</button>
                </span>
            </div>
            <!-- foto 3 -->
            <div class="quizz-foto" id="foto_3">
                <h1>foto 3 / 7</h1>
                <div class="foto">
                    <img src="../assets/quizz-foto/jimin.png" alt="bts Dynamite">
                    <h5>Dica: Quase debutou com o stage name de 'Baby J'</h5>
                    <span class=respostas>
                        <input type="text" id="R_Q3" placeholder="Digite seu palpite">
                    </span>
                </div>
                <span class="botoes">
                    <button onclick="retornar()">Voltar</button>
                    <button onclick="avancar()">Proxima</button>
                </span>
            </div>
            <!-- foto 4 -->
            <div class="quizz-foto" id="foto_4">
                <h1>foto 4 / 7</h1>
                <div class="foto">
                    <img src="../assets/quizz-foto/jin.png" alt="">
                    <h5>Dica: Integrante mais velho do grupo.</h5>
                    <span class=respostas>
                        <input type="text" id="R_Q4" placeholder="Digite seu palpite">
                    </span>
                </div>
                <span class="botoes">
                    <button onclick="retornar()">Voltar</button>
                    <button onclick="avancar()">Proxima</button>
                </span>
            </div>
            <!-- foto 5 -->
            <div class="quizz-foto" id="foto_5">
                <h1>foto 5 / 7</h1>
                <div class="foto">
                    <img src="../assets/quizz-foto/suga.png" alt="">
                    <h5>Dica: Seu stage name tem relação com o esporte basquete.</h5>
                    <span class=respostas>
                        <input type="text" id="R_Q5" placeholder="Digite seu palpite">
                    </span>
                </div>
                <span class="botoes">
                    <button onclick="retornar()">Voltar</button>
                    <button onclick="avancar()">Proxima</button>
                </span>
            </div>
            <!-- foto 6 -->
            <div class="quizz-foto" id="foto_6">
                <h1>foto 6 / 7</h1>
                <div class="foto">
                    <img src="../assets/quizz-foto/v.png" alt="">
                    <h5>Dica: Interpretou um papel no dorama Hwarang.</h5>
                    <span class=respostas>
                        <input type="text" id="R_Q6" placeholder="Digite seu palpite">
                    </span>
                </div>
                <span class="botoes">
                    <button onclick="retornar()">Voltar</button>
                    <button onclick="avancar()">Proxima</button>
                </span>
            </div>
            <!-- foto 7 -->
            <div class="quizz-foto" id="foto_7">
                <h1>foto 7 / 7</h1>
                <div class="foto">
                    <img src="../assets/quizz-foto/j-hope.png" alt="">
                    <h5>Dica: Encerrou o Lollapalooza de chigado.</h5>
                    <span class=respostas>
                        <input type="text" id="R_Q7" placeholder="Digite seu palpite">
                    </span>
                </div>
                <span class="botoes">
                    <button onclick="retornar()">Voltar</button>
                    <button onclick="finalizar()">Finalizar</button>
                </span>
            </div>
            <!-- Resultado -->
            <div class="quizz-foto" id="tela_final">
                <h1>Resultado</h1>
                <img src="../assets/resultados-quiz1.png">
                <h4>Você acertou <span id='resultado'>x</span> questões</h4>
                <span class=respostas>
                    <button onclick="refazer()">Refazer</button>
                    <button onclick="salvar()">Salvar resultado</button>
                </span>
            </div>
        </div>

</body>

</html>
<script>
    foto_1.style.display = "flex";
    function logout() {
        sessionStorage.clear()
        window.location = "../index.html";
    }
    var pontos = 0;
    var answer = ['JUNGKOOK', 'RM', 'JIMIN', 'JIN', 'SUGA', 'V', 'J-HOPE']
    var answer2 = ['NAMJOON', 'YOONGI', 'TAEHYUNG', 'HOSEOK']
    var resposta1 = ""
    var resposta2 = ""
    var resposta3 = ""
    var resposta4 = ""
    var resposta5 = ""
    var resposta6 = ""
    var resposta7 = ""
    var manipulado = ""
    function avancar() {
        if (foto_1.style.display === "flex") {
            resposta1 = R_Q1.value
            if (resposta1 != "") {
                manipulado = resposta1.toUpperCase()
                if (answer[0] == manipulado) {
                    pontos++
                }
                foto_1.style.display = "none";
                foto_2.style.display = "flex";
            } else {
                alert(`Digite uma resposta antes de prosseguir`)
            }
        } else if (foto_2.style.display === "flex") {
            resposta2 = R_Q2.value
            if (validacao2 = resposta2 != "") {
                manipulado = resposta2.toUpperCase()
                if (answer[1] == manipulado) {
                    pontos++
                }
                foto_2.style.display = "none";
                foto_3.style.display = "flex";
            } else {
                alert(`Digite uma resposta antes de prosseguir`)
            }
        } else if (foto_3.style.display === "flex") {
            resposta3 = R_Q3.value
            if (resposta3 != "") {
                manipulado = resposta3.toUpperCase()
                if (answer[2] == manipulado) {
                    pontos++
                }
                foto_3.style.display = "none";
                foto_4.style.display = "flex";
            } else {
                alert(`Digite uma resposta antes de prosseguir`)
            }
        } else if (foto_4.style.display === "flex") {
            resposta4 = R_Q4.value
            if (resposta4 != "") {
                manipulado = resposta4.toUpperCase()
                if (answer[3] == manipulado) {
                    pontos++
                }
                foto_4.style.display = "none";
                foto_5.style.display = "flex";
            } else {
                alert(`Digite uma resposta antes de prosseguir`)
            }
        } else if (foto_5.style.display === "flex") {
            resposta5 = R_Q5.value
            if (resposta5 != "") {
                manipulado = resposta5.toUpperCase()
                if (answer[4] == manipulado) {
                    pontos++
                }
                foto_5.style.display = "none";
                foto_6.style.display = "flex";
            } else {
                alert(`Digite uma resposta antes de prosseguir`)
            }
        } else if (foto_6.style.display === "flex") {
            resposta6 = R_Q6.value
            if (resposta6 != "") {
                manipulado = resposta6.toUpperCase()
                if (answer[5] == manipulado) {
                    pontos++
                }
                foto_6.style.display = "none";
                foto_7.style.display = "flex";
            } else {
                alert(`Digite uma resposta antes de prosseguir`)
            }
        }
    }

    function finalizar() {
        resposta7 = R_Q7.value
        if (resposta7 != "") {
            manipulado = resposta7.toUpperCase()
            if (answer[6] == manipulado) {
                pontos++
            }
            foto_7.style.display = "none";
            tela_final.style.display = "flex";
            resultado.innerHTML = pontos
        } else {
            alert(`Digite uma resposta antes de prosseguir`)
        }
    }


    function refazer() {
        pontos = 0;
        foto.style.display = "flex";
        foto_2.style.display = "none";
        foto_3.style.display = "none";
        foto_4.style.display = "none";
        foto_5.style.display = "none";
        tela_final.style.display = "none";
        resposta1 = ``
        resposta2 = ``
        resposta3 = ``
        resposta4 = ``
        resposta5 = ``
        manipulado = ``
        R_Q1.value = ``
        R_Q2.value = ``
        R_Q3.value = ``
        R_Q4.value = ``
        R_Q5.value = ``
    }

    function salvar() {
        var usernameVar = sessionStorage.username_USUARIO;
        fetch("/usuarios/resultadoquizquatro", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                pontosServer: pontos,
                usernameServer: usernameVar
            })
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                alert(`Foi registrada a pontuação de ${pontos}`);
                finalizarAguardar();
                refazer();
                setTimeout(() => {
                    window.location = "logado/quizdash.html";
                }, "2000")

                finalizarAguardar();
            } else {
                throw ("Houve um erro ao tentar realizar o cadastro!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            // finalizarAguardar();
        });

        return false;
    }

    function sumirMensagem() {
        // mensagem_erro.innerHTML = ``;
    }

</script>